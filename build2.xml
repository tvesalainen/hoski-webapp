<?xml version="1.0" encoding="iso-8859-1" standalone="yes" ?>
<!--
   Copyright (C) 2012 Helsingfors Segelklubb ry
  
   This program is free software: you can redistribute it and/or modify
   it under the terms of the GNU Affero General Public License as published by
   the Free Software Foundation, either version 3 of the License, or
   (at your option) any later version.
  
   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU Affero General Public License for more details.
  
   You should have received a copy of the GNU Affero General Public License
   along with this program.  If not, see <http://www.gnu.org/licenses/>.
-->
<!-- 
     Ant build file for VVT CR project
     Copyright (c) 2001-2003 Mermit Business Applications Oy

     $Revision: 1.19 $
     $Id: build.xml,v 1.19 2007/01/05 14:05:07 eiriv Exp $
-->

<project name="hoski" default="build" basedir=".">

  <target name="init">
    <property name="distname" value="hoski" />

    <property name="build.debug" value="true"/>

    <fileset id="ext-libs"
             dir="ext"
             includes="*.jar"/>

    <fileset id="war-libs"
             dir="web/WEB-INF/lib"
             includes="*.jar"/>

    <path id="project.class.path">
      <fileset refid="ext-libs"/>
      <fileset refid="war-libs"/>
    </path>
  </target>

  <!-- Compile servlets and make language translation -->
  <target name="build" depends="init"
          description="Compiles all servlets">
    <mkdir dir="build"/>

    <javac srcdir="src/java"
	   destdir="build"
           debug="true"
           source="1.6"
	   target="1.6"
           includeantruntime="false">
      <classpath refid="project.class.path" />
      <compilerarg value="-Xlint"/>
    </javac>
  </target>

  <target name="dist" depends="build">
    <delete file="dist/hoski.war"/>
    <mkdir dir="dist"/>
    <war warfile="dist/hoski.war" webxml="web/WEB-INF/web.xml">
      <fileset dir="web" />
      <classes dir="build" />
    </war>
  </target>

  <!-- Cleans all by removing build directories. -->
  <target name="clean" depends="init"
          description="Cleans all by removing build and dist directories">
    <delete dir="build" />
    <delete dir="dist" />
  </target>
</project>
